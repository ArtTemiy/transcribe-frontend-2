# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ú–æ–∫ –°–µ—Ä–≤–µ—Ä–∞ - –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

## –ß—Ç–æ –±—ã–ª–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

–î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ **React Router v7 + TanStack Query + TypeScript** –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–∫ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑–µ **MSW (Mock Service Worker)**.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
üìÅ app/
‚îú‚îÄ‚îÄ üìÅ mocks/
‚îÇ   ‚îú‚îÄ‚îÄ handlers.ts     # –í—Å–µ –º–æ–∫ API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ browser.ts      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ node.ts         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è SSR
‚îÇ   ‚îî‚îÄ‚îÄ init.ts         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ üìÅ queries/
‚îÇ   ‚îú‚îÄ‚îÄ userInfo.tsx    # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
‚îÇ   ‚îú‚îÄ‚îÄ fileStatus.ts   # üÜï –ù–æ–≤—ã–π query –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Ñ–∞–π–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ filesHistory.ts # üÜï –ù–æ–≤—ã–π query –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ üìÅ mutations/
‚îÇ   ‚îú‚îÄ‚îÄ uploadFile.ts   # ‚úÖ –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ downloadFile.ts # ‚úÖ –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ deleteFile.ts   # üÜï –ù–æ–≤–∞—è –º—É—Ç–∞—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ üìÅ components/
    ‚îî‚îÄ‚îÄ üìÅ dev/
        ‚îî‚îÄ‚îÄ MockServerControls.tsx # üÜï Dev –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

## –ó–∞–ø—É—Å–∫

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   npm install
   ```

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ MSW:**
   ```bash
   npx msw init public/ --save
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   npm run dev
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä** - –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –ø–æ—è–≤–∏—Ç—Å—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–º

## –î–æ—Å—Ç—É–ø–Ω—ã–µ API endpoints

- `GET /api/user/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `POST /api/upload` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
- `GET /api/status/:requestId` - –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
- `GET /api/download/:requestId` - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- `GET /api/files/history` - –ò—Å—Ç–æ—Ä–∏—è —Ñ–∞–π–ª–æ–≤
- `DELETE /api/files/:requestId` - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–º

### –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env):
```env
VITE_ENABLE_MOCKS=true   # –≤–∫–ª—é—á–∏—Ç—å
VITE_ENABLE_MOCKS=false  # –æ—Ç–∫–ª—é—á–∏—Ç—å
```

### –ß–µ—Ä–µ–∑ dev –ø–∞–Ω–µ–ª—å:
- –í development —Ä–µ–∂–∏–º–µ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –ø–æ—è–≤–∏—Ç—Å—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å –º–æ–∫–∏ –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ –¥–∞–Ω–Ω—ã–µ

### –ß–µ—Ä–µ–∑ localStorage:
```javascript
localStorage.setItem('enableMocks', 'true');  // –≤–∫–ª—é—á–∏—Ç—å
localStorage.setItem('enableMocks', 'false'); // –æ—Ç–∫–ª—é—á–∏—Ç—å
window.location.reload(); // –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å –≤–∞—à–∏–º —Å—Ç–µ–∫–æ–º (React Router v7 + TanStack Query)  
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤ SSR** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥  
‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ API  
‚úÖ **–õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API  
‚úÖ **Dev-friendly** - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤  
‚úÖ **TypeScript** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö API  

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### 1. JSON Server (–ø—Ä–æ—Å—Ç–æ–π REST API)
```bash
npm install -D json-server
```
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å SSR
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞

### 2. Vite Proxy (–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä)
```typescript
// vite.config.ts
export default defineConfig({
  server: {
    proxy: {
      '/api': 'http://localhost:3001'
    }
  }
});
```
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚ùå –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production build

### 3. Express.js —Å–µ—Ä–≤–µ—Ä
```bash
npm install -D express cors
```
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- ‚ùå –ù—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**MSW - –ª—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –≤–∞—à–µ–≥–æ —Å—Ç–µ–∫–∞**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Service Worker
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SSR –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å TanStack Query
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–∫ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –ò–∑—É—á–∏—Ç–µ —Ñ–∞–π–ª `app/mocks/handlers.ts` - —Ç–∞–º –≤—Å–µ –º–æ–∫ endpoints
3. –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ endpoints –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dev –ø–∞–Ω–µ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `docs/MOCK_SERVER.md`

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `public/mockServiceWorker.js` —Å–æ–∑–¥–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `VITE_ENABLE_MOCKS=true` –≤ `.env`
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `docs/MOCK_SERVER.md`